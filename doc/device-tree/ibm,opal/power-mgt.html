<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ibm,opal/power-mgt device tree entries &#8212; skiboot 5.4.0-rc3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.4.0-rc3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="skiboot 5.4.0-rc3 documentation" href="../../index.html" />
    <link rel="up" title="ibm,opal" href="../ibm,opal.html" />
    <link rel="next" title="ibm,opal/sensors/ device tree nodes" href="sensors.html" />
    <link rel="prev" title="Operator Panel (oppanel)" href="oppanel.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="sensors.html" title="ibm,opal/sensors/ device tree nodes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="oppanel.html" title="Operator Panel (oppanel)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">skiboot 5.4.0-rc3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Device Tree</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../ibm,opal.html" accesskey="U">ibm,opal</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="ibm-opal-power-mgt-device-tree-entries">
<h1>ibm,opal/power-mgt device tree entries<a class="headerlink" href="#ibm-opal-power-mgt-device-tree-entries" title="Permalink to this headline">¶</a></h1>
<p>All available CPU idle states are listed in ibm,cpu-idle-state-names</p>
<p>For example:</p>
<div class="highlight-dts"><div class="highlight"><pre><span></span><span class="nc">power-mgt</span> <span class="p">{</span>
  <span class="nf">ibm,cpu-idle-state-names</span> <span class="o">=</span> <span class="s">&quot;nap&quot;, &quot;fastsleep_&quot;, &quot;winkle&quot;</span><span class="p">;</span>
  <span class="nf">ibm,cpu-idle-state-residency-ns</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x1</span> <span class="mh">0x2</span> <span class="mh">0x3</span><span class="p">&gt;;</span>
  <span class="nf">ibm,cpu-idle-state-latencies-ns</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x1</span> <span class="mh">0x2</span> <span class="mh">0x3</span><span class="p">&gt;;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The idle states are characterized by latency and residency
numbers which determine the breakeven point for entry into them. The
latency is a measure of the exit overhead from the idle state and
residency is the minimum amount of time that a CPU must be predicted
to be idle so as to reap the powersavings from entering into that idle
state.</p>
<p>These numbers are made use of by the cpuidle governors in the kernel to
arrive at the appropriate idle state that a CPU must enter into when there is
no work to be done. The values in ibm,cpu-idle-state-latencies-ns are the
the measured latency numbers for the idle states. The residency numbers have
been arrived at experimentally after ensuring that the performance of latency
sensitive workloads do not regress while allowing deeper idle states to be
entered into during low load situations. The kernel is expected to use these
values for optimal power efficiency.</p>
<p>Example:</p>
<div class="highlight-dts"><div class="highlight"><pre><span></span><span class="k">/</span> <span class="p">{</span>
  <span class="nc">ibm,opal</span> <span class="p">{</span>
    <span class="nc">power-mgt</span> <span class="p">{</span>
             <span class="nf">ibm,pstate-frequencies-mhz</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xda3</span> <span class="mh">0xd82</span> <span class="mh">0xd60</span> <span class="mh">0xd3f</span> <span class="mh">0xd1e</span> <span class="mh">0xcfd</span> <span class="mh">0xcdb</span> <span class="mh">0xcba</span> <span class="mh">0xc99</span> <span class="mh">0xc78</span> <span class="mh">0xc56</span> <span class="mh">0xc35</span> <span class="mh">0xc14</span> <span class="mh">0xbf3</span> <span class="mh">0xbd1</span> <span class="mh">0xbb0</span> <span class="mh">0xb8f</span> <span class="mh">0xb6e</span> <span class="mh">0xb4c</span> <span class="mh">0xb2b</span> <span class="mh">0xb0a</span> <span class="mh">0xae9</span> <span class="mh">0xac7</span> <span class="mh">0xaa6</span> <span class="mh">0xa85</span> <span class="mh">0xa64</span> <span class="mh">0xa42</span> <span class="mh">0xa21</span> <span class="mh">0xa00</span> <span class="mh">0x9df</span> <span class="mh">0x9bd</span> <span class="mh">0x99c</span> <span class="mh">0x97b</span> <span class="mh">0x95a</span> <span class="mh">0x938</span> <span class="mh">0x917</span> <span class="mh">0x8f6</span> <span class="mh">0x8d5</span> <span class="mh">0x8b3</span> <span class="mh">0x892</span> <span class="mh">0x871</span> <span class="mh">0x850</span> <span class="mh">0x82e</span> <span class="mh">0x80d</span><span class="p">&gt;;</span>
             <span class="nf">ibm,cpu-idle-state-latencies-ns</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xfa0</span> <span class="mh">0x9c40</span> <span class="mh">0x989680</span><span class="p">&gt;;</span>
             <span class="nf">ibm,cpu-idle-state-flags</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x11000</span> <span class="mh">0x81003</span> <span class="mh">0x47003</span><span class="p">&gt;;</span>
             <span class="nf">ibm,cpu-idle-state-names</span> <span class="o">=</span> <span class="s">&quot;nap&quot;, &quot;fastsleep_&quot;, &quot;winkle&quot;</span><span class="p">;</span>
             <span class="nf">ibm,cpu-idle-state-pmicr</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span> <span class="mh">0x0</span> <span class="mh">0x20</span> <span class="mh">0x0</span> <span class="mh">0x0</span> <span class="mh">0x0</span><span class="p">&gt;;</span>
             <span class="nf">ibm,pstate-vdds</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x5758595a</span> <span class="mh">0x5a5b5c5d</span> <span class="mh">0x5e5e5f60</span> <span class="mh">0x61626263</span> <span class="mh">0x64656566</span> <span class="mh">0x66676768</span> <span class="mh">0x6869696a</span> <span class="mh">0x6a6b6b6c</span> <span class="mh">0x6c6d6d6e</span> <span class="mh">0x6e6f6f70</span> <span class="mh">0x70717272</span><span class="p">&gt;;</span>
             <span class="nf">ibm,pstate-vcss</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x4d4e4f4f</span> <span class="mh">0x50505152</span> <span class="mh">0x52535354</span> <span class="mh">0x55555657</span> <span class="mh">0x57585859</span> <span class="mh">0x59595a5a</span> <span class="mh">0x5a5b5b5c</span> <span class="mh">0x5c5c5d5d</span> <span class="mh">0x5d5e5e5f</span> <span class="mh">0x5f5f6060</span> <span class="mh">0x60616162</span><span class="p">&gt;;</span>
             <span class="nf">ibm,pstate-nominal</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xffffffef</span><span class="p">&gt;;</span>
             <span class="nf">ibm,cpu-idle-state-residency-ns</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x186a0</span> <span class="mh">0x11e1a300</span> <span class="mh">0x3b9aca00</span><span class="p">&gt;;</span>
             <span class="nf">ibm,cpu-idle-state-pmicr-mask</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span> <span class="mh">0x0</span> <span class="mh">0x30</span> <span class="mh">0x0</span> <span class="mh">0x0</span> <span class="mh">0x0</span><span class="p">&gt;;</span>
             <span class="nf">phandle</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x100002a0</span><span class="p">&gt;;</span>
             <span class="nf">ibm,pstate-ids</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span> <span class="mh">0xffffffff</span> <span class="mh">0xfffffffe</span> <span class="mh">0xfffffffd</span> <span class="mh">0xfffffffc</span> <span class="mh">0xfffffffb</span> <span class="mh">0xfffffffa</span> <span class="mh">0xfffffff9</span> <span class="mh">0xfffffff8</span> <span class="mh">0xfffffff7</span> <span class="mh">0xfffffff6</span> <span class="mh">0xfffffff5</span> <span class="mh">0xfffffff4</span> <span class="mh">0xfffffff3</span> <span class="mh">0xfffffff2</span> <span class="mh">0xfffffff1</span> <span class="mh">0xfffffff0</span> <span class="mh">0xffffffef</span> <span class="mh">0xffffffee</span> <span class="mh">0xffffffed</span> <span class="mh">0xffffffec</span> <span class="mh">0xffffffeb</span> <span class="mh">0xffffffea</span> <span class="mh">0xffffffe9</span> <span class="mh">0xffffffe8</span> <span class="mh">0xffffffe7</span> <span class="mh">0xffffffe6</span> <span class="mh">0xffffffe5</span> <span class="mh">0xffffffe4</span> <span class="mh">0xffffffe3</span> <span class="mh">0xffffffe2</span> <span class="mh">0xffffffe1</span> <span class="mh">0xffffffe0</span> <span class="mh">0xffffffdf</span> <span class="mh">0xffffffde</span> <span class="mh">0xffffffdd</span> <span class="mh">0xffffffdc</span> <span class="mh">0xffffffdb</span> <span class="mh">0xffffffda</span> <span class="mh">0xffffffd9</span> <span class="mh">0xffffffd8</span> <span class="mh">0xffffffd7</span> <span class="mh">0xffffffd6</span> <span class="mh">0xffffffd5</span><span class="p">&gt;;</span>
             <span class="nf">ibm,pstate-max</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x0</span><span class="p">&gt;;</span>
             <span class="nf">ibm,pstate-min</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0xffffffd5</span><span class="p">&gt;;</span>
    <span class="p">};</span>
  <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="section" id="ibm-cpu-idle-state-pmicr-ibm-cpu-idle-state-pmicr-mask">
<h2>ibm,cpu-idle-state-pmicr ibm,cpu-idle-state-pmicr-mask<a class="headerlink" href="#ibm-cpu-idle-state-pmicr-ibm-cpu-idle-state-pmicr-mask" title="Permalink to this headline">¶</a></h2>
<p>In POWER8, idle states sleep and winkle have 2 modes- fast and deep. In fast
mode, idle state puts the core into threshold voltage whereas deep mode
completely turns off the core. Choosing fast vs deep mode for an idle state
can be done either via PM_GP1 scom or by writing to PMICR special register.
If using the PMICR path to choose fast/deep mode then ibm,cpu-idle-state-pmicr
and ibm,cpu-idle-state-pmicr-mask properties expose relevant PMICR bits and
values for corresponding idle states.</p>
</div>
<div class="section" id="ibm-cpu-idle-state-psscr-ibm-cpu-idle-state-psscr-mask">
<h2>ibm,cpu-idle-state-psscr ibm,cpu-idle-state-psscr-mask<a class="headerlink" href="#ibm-cpu-idle-state-psscr-ibm-cpu-idle-state-psscr-mask" title="Permalink to this headline">¶</a></h2>
<p>In POWER ISA v3, there is a common instruction &#8216;stop&#8217; to enter any idle state
and SPR PSSCR is used to specify which idle state needs to be entered upon
executing stop instruction. Properties ibm,cpu-idle-state-psscr and
ibm,cpu-idle-state-psscr-mask expose the relevant PSSCR bits and values for
corresponding idle states.</p>
</div>
<div class="section" id="ibm-cpu-idle-state-flags">
<h2>ibm,cpu-idle-state-flags<a class="headerlink" href="#ibm-cpu-idle-state-flags" title="Permalink to this headline">¶</a></h2>
<p>These flags are used to describe the characteristics of the idle states like
the kind of core state loss caused. These flags are used by the kernel to
save/restore appropriate context while using the idle states.</p>
</div>
<div class="section" id="ibm-pstate-ids">
<h2>ibm,pstate-ids<a class="headerlink" href="#ibm-pstate-ids" title="Permalink to this headline">¶</a></h2>
<p>This property lists the available pstate identifiers, as signed 32-bit
big-endian values. While the identifiers are somewhat arbitrary, these define
the order of the pstates in other ibm,pstate-* properties.</p>
</div>
<div class="section" id="ibm-pstate-frequencies-mhz">
<h2>ibm,pstate-frequencies-mhz<a class="headerlink" href="#ibm-pstate-frequencies-mhz" title="Permalink to this headline">¶</a></h2>
<p>This property lists the frequency, in MHz, of each of the pstates listed in the
ibm,pstate-ids file. Each frequency is a 32-bit big-endian word.</p>
</div>
<div class="section" id="ibm-pstate-max-ibm-pstate-min-ibm-pstate-nominal">
<h2>ibm,pstate-max ibm,pstate-min ibm,pstate-nominal<a class="headerlink" href="#ibm-pstate-max-ibm-pstate-min-ibm-pstate-nominal" title="Permalink to this headline">¶</a></h2>
<p>These properties give the maximum, minimum and nominal pstate values, as an id
specified in the ibm,pstate-ids file.</p>
</div>
<div class="section" id="ibm-pstate-vcss-ibm-pstate-vdds">
<h2>ibm,pstate-vcss ibm,pstate-vdds<a class="headerlink" href="#ibm-pstate-vcss-ibm-pstate-vdds" title="Permalink to this headline">¶</a></h2>
<p>These properties list a voltage-identifier of each of the pstates listed in
ibm,pstate-ids for the Vcs and Vdd values used for that pstate. Each VID is a
single byte.</p>
</div>
<div class="section" id="ibm-pstate-ultra-turbo-ibm-pstate-turbo">
<h2>ibm,pstate-ultra-turbo ibm,pstate-turbo<a class="headerlink" href="#ibm-pstate-ultra-turbo-ibm-pstate-turbo" title="Permalink to this headline">¶</a></h2>
<p>These properties are added when ultra-turbo(WOF) is enabled. These properties
give the max turbo and max ultra-turbo pstate.</p>
</div>
<div class="section" id="ibm-pstate-core-max">
<h2>ibm,pstate-core-max<a class="headerlink" href="#ibm-pstate-core-max" title="Permalink to this headline">¶</a></h2>
<p>This property is added when ultra_turbo(WOF) is enabled. This property gives
the list of max pstate for each &#8216;n&#8217; number of active cores in the chip.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">ibm,opal/power-mgt device tree entries</a><ul>
<li><a class="reference internal" href="#ibm-cpu-idle-state-pmicr-ibm-cpu-idle-state-pmicr-mask">ibm,cpu-idle-state-pmicr ibm,cpu-idle-state-pmicr-mask</a></li>
<li><a class="reference internal" href="#ibm-cpu-idle-state-psscr-ibm-cpu-idle-state-psscr-mask">ibm,cpu-idle-state-psscr ibm,cpu-idle-state-psscr-mask</a></li>
<li><a class="reference internal" href="#ibm-cpu-idle-state-flags">ibm,cpu-idle-state-flags</a></li>
<li><a class="reference internal" href="#ibm-pstate-ids">ibm,pstate-ids</a></li>
<li><a class="reference internal" href="#ibm-pstate-frequencies-mhz">ibm,pstate-frequencies-mhz</a></li>
<li><a class="reference internal" href="#ibm-pstate-max-ibm-pstate-min-ibm-pstate-nominal">ibm,pstate-max ibm,pstate-min ibm,pstate-nominal</a></li>
<li><a class="reference internal" href="#ibm-pstate-vcss-ibm-pstate-vdds">ibm,pstate-vcss ibm,pstate-vdds</a></li>
<li><a class="reference internal" href="#ibm-pstate-ultra-turbo-ibm-pstate-turbo">ibm,pstate-ultra-turbo ibm,pstate-turbo</a></li>
<li><a class="reference internal" href="#ibm-pstate-core-max">ibm,pstate-core-max</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="oppanel.html"
                        title="previous chapter">Operator Panel (oppanel)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="sensors.html"
                        title="next chapter">ibm,opal/sensors/ device tree nodes</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/device-tree/ibm,opal/power-mgt.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="sensors.html" title="ibm,opal/sensors/ device tree nodes"
             >next</a> |</li>
        <li class="right" >
          <a href="oppanel.html" title="Operator Panel (oppanel)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">skiboot 5.4.0-rc3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Device Tree</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../ibm,opal.html" >ibm,opal</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Stewart Smith, IBM, others.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>